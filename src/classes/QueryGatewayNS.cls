/**
 * Gateway methods for the Query Object - Not Shared
 */
public without sharing class QueryGatewayNS 
{
    public static Query__c findQueryAndLoadInvoiceByQueryId(Id queryId) 
    {
        try
        {
            return [Select Id, Name, Client__c, FinanceAccount__c, SalesInvoice__c, SalesPerson__c, SalesPersonEmail__c, Status__c,
                        SalesManager__c, SalesManagerEmail__c, SalesSection__c, SalesSectionEmail__c, BusinessUnit__c,
                        TotalQueryAmount__c, ToBeAllocatedQueryAmount__c,
                        SalesInvoice__r.Id, 
                        SalesInvoice__r.Name, 
                        SalesInvoice__r.CurrencyIsoCode, 
                        SalesInvoice__r.c2g__Account__c, 
                        SalesInvoice__r.c2g__CustomerReference__c, 
                        SalesInvoice__r.c2g__Dimension1__c, 
                        SalesInvoice__r.c2g__Dimension2__c, 
                        SalesInvoice__r.ffps_dmg__AdReference__c,
                        SalesInvoice__r.c2g__Dimension3__c, 
                        SalesInvoice__r.c2g__Dimension4__c, 
                        SalesInvoice__r.c2g__DiscardReason__c, 
                        SalesInvoice__r.c2g__DueDate__c, 
                        SalesInvoice__r.c2g__ExternalId__c, 
                        SalesInvoice__r.c2g__FirstDueDate__c, 
                        SalesInvoice__r.c2g__GeneralLedgerAccount__c, 
                        SalesInvoice__r.c2g__IncomeScheduleGroup__c, 
                        SalesInvoice__r.c2g__IncomeSchedule__c, 
                        SalesInvoice__r.c2g__Interval__c, 
                        SalesInvoice__r.c2g__InvoiceCurrency__c, 
                        SalesInvoice__r.c2g__InvoiceDate__c, 
                        SalesInvoice__r.c2g__InvoiceDescription__c, 
                        SalesInvoice__r.c2g__InvoiceGroup__c, 
                        SalesInvoice__r.c2g__InvoiceStatus__c, 
                        SalesInvoice__r.c2g__InvoiceTotal__c, 
                        SalesInvoice__r.c2g__NumberOfPayments__c, 
                        SalesInvoice__r.c2g__NumberofJournals__c, 
                        SalesInvoice__r.c2g__Opportunity__c, 
                        SalesInvoice__r.c2g__OutstandingValue__c, 
                        SalesInvoice__r.c2g__OwnerCompany__c, 
                        SalesInvoice__r.c2g__OwnerCompany__r.Name,
                        SalesInvoice__r.c2g__PaymentSchedule__c, 
                        SalesInvoice__r.c2g__PaymentStatus__c, 
                        SalesInvoice__r.c2g__PeriodInterval__c, 
                        SalesInvoice__r.c2g__Period__c, 
                        SalesInvoice__r.c2g__PrintStatus__c, 
                        SalesInvoice__r.c2g__PrintedText1AllowEdit__c, 
                        SalesInvoice__r.c2g__PrintedText1Heading__c, 
                        SalesInvoice__r.c2g__PrintedText1TextDefinitionName__c, 
                        SalesInvoice__r.c2g__PrintedText1Text__c, 
                        SalesInvoice__r.c2g__PrintedText2AllowEdit__c, 
                        SalesInvoice__r.c2g__PrintedText2Heading__c, 
                        SalesInvoice__r.c2g__PrintedText2TextDefinitionName__c, 
                        SalesInvoice__r.c2g__PrintedText2Text__c, 
                        SalesInvoice__r.c2g__PrintedText3AllowEdit__c, 
                        SalesInvoice__r.c2g__PrintedText3Heading__c, 
                        SalesInvoice__r.c2g__PrintedText3TextDefinitionName__c, 
                        SalesInvoice__r.c2g__PrintedText3Text__c, 
                        SalesInvoice__r.c2g__PrintedText4AllowEdit__c, 
                        SalesInvoice__r.c2g__PrintedText4Heading__c, 
                        SalesInvoice__r.c2g__PrintedText4TextDefinitionName__c, 
                        SalesInvoice__r.c2g__PrintedText4Text__c, 
                        SalesInvoice__r.c2g__PrintedText5AllowEdit__c, 
                        SalesInvoice__r.c2g__PrintedText5Heading__c, 
                        SalesInvoice__r.c2g__PrintedText5TextDefinitionName__c, 
                        SalesInvoice__r.c2g__PrintedText5Text__c, 
                        SalesInvoice__r.c2g__ShippingMethod__c, 
                        SalesInvoice__r.c2g__StartDate__c, 
                        SalesInvoice__r.c2g__TaxCode1__c, 
                        SalesInvoice__r.c2g__TaxCode2__c, 
                        SalesInvoice__r.c2g__TaxCode3__c, 
                        SalesInvoice__r.c2g__TaxTotal__c, 
                        SalesInvoice__r.c2g__Transaction__c, 
                        SalesInvoice__r.c2g__UnitOfWork__c, 
                        SalesInvoice__r.c2g__Usepartperiods__c, 
                        SalesInvoice__r.c2g__Year__c, 
                        SalesInvoice__r.c2g__NetTotal__c, 
                        SalesInvoice__r.c2g__Tax1Total__c, 
                        SalesInvoice__r.c2g__Tax2Total__c, 
                        SalesInvoice__r.c2g__Tax3Total__c, 
                        SalesInvoice__r.c2g__BillingAddress__c, 
                        SalesInvoice__r.c2g__CopyAccountValues__c, 
                        SalesInvoice__r.c2g__CopyDefaultPrintedTextDefinitions__c, 
                        SalesInvoice__r.c2g__CreatingRecurringInvoice__c, 
                        SalesInvoice__r.c2g__DeriveCurrency__c, 
                        SalesInvoice__r.c2g__DeriveDueDate__c, 
                        SalesInvoice__r.c2g__DerivePeriod__c, 
                        SalesInvoice__r.c2g__ShippingAddress__c, 
                        SalesInvoice__r.c2g__PaymentScheduleTotal__c, 
                        SalesInvoice__r.ffbext__Approved__c, 
                        SalesInvoice__r.ffps_dmg__FinanceAccount__c, 
                        SalesInvoice__r.ffps_dmg__DocumentCreditStatus__c,
                        SalesInvoice__r.ffps_dmg__BDWOJournal__c, 
                        SalesInvoice__r.ffps_dmg__BDWOMatchingReference__c,
                        SalesInvoice__r.ffps_dmg__DMGTransactionType__c,
                        (Select Id, Name, QueryValue__c, NetValue__c, SalesInvoiceLineItem__c,
                            SalesInvoiceLineItem__r.Id, 
                            SalesInvoiceLineItem__r.Name, 
                            SalesInvoiceLineItem__r.CurrencyIsoCode, 
                            SalesInvoiceLineItem__r.c2g__Invoice__c, 
                            SalesInvoiceLineItem__r.c2g__Dimension1__c, 
                            SalesInvoiceLineItem__r.c2g__Dimension2__c, 
                            SalesInvoiceLineItem__r.c2g__Dimension3__c, 
                            SalesInvoiceLineItem__r.c2g__Dimension4__c, 
                            SalesInvoiceLineItem__r.c2g__ExternalId__c, 
                            SalesInvoiceLineItem__r.c2g__GeneralLedgerAccount__c, 
                            SalesInvoiceLineItem__r.c2g__IncomeScheduleGroup__c, 
                            SalesInvoiceLineItem__r.c2g__IncomeSchedule__c, 
                            SalesInvoiceLineItem__r.c2g__LineDescription__c, 
                            SalesInvoiceLineItem__r.c2g__LineNumber__c, 
                            SalesInvoiceLineItem__r.c2g__NetValue__c, 
                            SalesInvoiceLineItem__r.c2g__NumberofJournals__c, 
                            SalesInvoiceLineItem__r.c2g__OwnerCompany__c, 
                            SalesInvoiceLineItem__r.c2g__PeriodInterval__c, 
                            SalesInvoiceLineItem__r.c2g__Product__c, 
                            SalesInvoiceLineItem__r.c2g__Quantity__c, 
                            SalesInvoiceLineItem__r.c2g__Scheduled__c, 
                            SalesInvoiceLineItem__r.c2g__StartDate__c, 
                            SalesInvoiceLineItem__r.c2g__TaxCode1__c, 
                            SalesInvoiceLineItem__r.c2g__TaxCode2__c, 
                            SalesInvoiceLineItem__r.c2g__TaxCode3__c, 
                            SalesInvoiceLineItem__r.c2g__TaxRate1__c, 
                            SalesInvoiceLineItem__r.c2g__TaxRate2__c, 
                            SalesInvoiceLineItem__r.c2g__TaxRate3__c, 
                            SalesInvoiceLineItem__r.c2g__TaxRateTotal__c, 
                            SalesInvoiceLineItem__r.c2g__TaxValue1__c, 
                            SalesInvoiceLineItem__r.c2g__TaxValue2__c, 
                            SalesInvoiceLineItem__r.c2g__TaxValue3__c, 
                            SalesInvoiceLineItem__r.c2g__TaxValueTotal__c, 
                            SalesInvoiceLineItem__r.c2g__UnitOfWork__c, 
                            SalesInvoiceLineItem__r.c2g__UnitPrice__c, 
                            SalesInvoiceLineItem__r.c2g__UsePartPeriods__c, 
                            SalesInvoiceLineItem__r.c2g__CalculateIncomeSchedule__c, 
                            SalesInvoiceLineItem__r.c2g__CalculateTaxValue1FromRate__c, 
                            SalesInvoiceLineItem__r.c2g__CalculateTaxValue2FromRate__c, 
                            SalesInvoiceLineItem__r.c2g__CalculateTaxValue3FromRate__c, 
                            SalesInvoiceLineItem__r.c2g__DeriveLineNumber__c, 
                            SalesInvoiceLineItem__r.c2g__DeriveTaxRate1FromCode__c, 
                            SalesInvoiceLineItem__r.c2g__DeriveTaxRate2FromCode__c, 
                            SalesInvoiceLineItem__r.c2g__DeriveTaxRate3FromCode__c, 
                            SalesInvoiceLineItem__r.c2g__DeriveUnitPriceFromProduct__c, 
                            SalesInvoiceLineItem__r.c2g__InternalCalculateIS__c, 
                            SalesInvoiceLineItem__r.c2g__ScheduleNetTotal__c, 
                            SalesInvoiceLineItem__r.c2g__SetTaxCode1ToDefault__c, 
                            SalesInvoiceLineItem__r.c2g__SetTaxCode2ToDefault__c, 
                            SalesInvoiceLineItem__r.c2g__SetTaxCode3ToDefault__c, 
                            SalesInvoiceLineItem__r.c2g__UseProductInformation__c, 
                            SalesInvoiceLineItem__r.ffps_dmg__ReceivingCompany__c 
                        From QueryLineItems__r Order By SalesInvoiceLineItem__r.c2g__LineNumber__c)
                    From Query__c
                    Where Id = :queryId];
        }
        catch(System.QueryException e)
        {
            return null;
        }
    }
}